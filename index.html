<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zona Gym Pro - Sistema completo</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="container">
      <section class="hero">
        <p class="badge">PLANIFICADOR FITNESS</p>
        <h1>Zona Gym Pro</h1>
        <p>Sistema con 8 secciones: plan nutricional, registro, ventas, pagos pendientes, búsqueda, personal, reportes y cierre de caja.</p>
      </section>

      <nav class="section-tabs" aria-label="Secciones principales">
        <button class="tab-btn active" type="button" data-target="nutrition-section">Plan nutricional</button>
        <button class="tab-btn" type="button" data-target="register-section">Registro de gym</button>
        <button class="tab-btn" type="button" data-target="sales-section">Ventas</button>
        <button class="tab-btn" type="button" data-target="pending-section">Pagos pendientes</button>
        <button class="tab-btn" type="button" data-target="search-section">Buscar usuario</button>
        <button class="tab-btn" type="button" data-target="staff-section">Personal gym</button>
        <button class="tab-btn" type="button" data-target="reports-section">Reportes</button>
        <button class="tab-btn" type="button" data-target="closure-section">Cierre de caja</button>
      </nav>

      <section id="nutrition-section" class="app-section">
        <section class="card form-card">
          <h2>Datos del alumno</h2>
          <form id="gym-form">
            <div class="grid">
              <label>Nombre<input type="text" id="name" placeholder="Ej: Juan Pérez" required /></label>
              <label>Edad<input type="number" id="age" min="14" max="90" required /></label>
              <label>
                Sexo
                <select id="sex" required>
                  <option value="">Seleccionar</option>
                  <option value="male">Masculino</option>
                  <option value="female">Femenino</option>
                </select>
              </label>
              <label>Peso actual (kg)<input type="number" id="weight" min="35" max="250" step="0.1" required /></label>
              <label>Estatura (cm)<input type="number" id="height" min="130" max="230" required /></label>
              <label>
                Actividad física
                <select id="activity" required>
                  <option value="1.2">Sedentario</option>
                  <option value="1.375">Ligera (1-3 días)</option>
                  <option value="1.55" selected>Moderada (3-5 días)</option>
                  <option value="1.725">Alta (6-7 días)</option>
                  <option value="1.9">Muy alta</option>
                </select>
              </label>
              <label>
                Objetivo
                <select id="goal" required>
                  <option value="lose">Bajar de peso</option>
                  <option value="maintain">Mantener peso</option>
                  <option value="gain">Subir de peso</option>
                </select>
              </label>
            </div>
            <button type="submit">Generar plan completo</button>
          </form>
        </section>

        <section id="results" class="hidden" aria-live="polite">
          <div class="card result-header" id="summary"></div>
          <div class="result-grid">
            <article class="card"><h3>Macros</h3><div id="macro-bars" class="stack"></div></article>
            <article class="card"><h3>Proyección</h3><div id="projection" class="projection"></div></article>
          </div>
          <article class="card"><h3>Comidas</h3><div id="foods" class="food-grid"></div></article>
          <article class="card"><h3>Rutina sugerida</h3><div id="routine" class="routine-grid"></div></article>
        </section>
      </section>

      <section id="register-section" class="app-section hidden">
        <section class="card form-card">
          <h2>Registro de inscripciones</h2>
          <form id="register-form" novalidate>
            <div class="grid">
              <label>Nombre y apellido<input type="text" id="fullName" required /></label>
              <label>Número de celular<input type="tel" id="phone" inputmode="numeric" placeholder="Ej: 987654321" /></label>
              <label>Fecha de inscripción<input type="date" id="startDate" required /></label>
              <label>
                Tipo de servicio
                <select id="serviceType" required>
                  <option value="">Seleccionar servicio</option>
                  <option value="rutina">Solo rutina</option>
                  <option value="maquinas">Solo máquinas</option>
                  <option value="bailes">Solo bailes</option>
                  <option value="maquina_baile">Máquina + baile</option>
                  <option value="baile_jumping">Baile + jumping</option>
                  <option value="3servicios">Los 3 servicios</option>
                </select>
              </label>
              <label>
                Cantidad de personas
                <select id="peopleCount" required>
                  <option value="1">1 persona</option>
                  <option value="2plus">2 a más personas (promoción)</option>
                </select>
              </label>
              <label>Precio base (S/)<input type="number" id="basePrice" readonly /></label>
              <label>Precio acordado (S/) <input type="number" id="customPrice" min="0" step="0.01" placeholder="Opcional" /></label>
              <label>Fecha de término<input type="date" id="endDate" readonly /></label>
              <label>Adelanto pagado (S/)<input type="number" id="advancePaid" min="0" step="0.01" value="0" required /></label>
              <label>Medio de pago del adelanto<select id="registerPayMethod"><option value="cash">Efectivo</option><option value="yape">Yape</option></select></label>
              <label>Total a pagar (S/)<input type="number" id="totalPay" readonly /></label>
              <label>Saldo (S/)<input type="number" id="balance" readonly /></label>
            </div>
            <p id="register-error" class="error-message hidden" role="alert"></p>
            <div class="actions">
              <button type="submit">Guardar inscripción</button>
            </div>
          </form>
        </section>

        <section class="card">
          <h3>Alertas de vencimiento (3 días antes)</h3>
          <div id="expiry-alerts" class="list-stack muted">Sin alertas por ahora.</div>
        </section>

        <section class="card">
          <h3>Personas registradas (pagado completo)</h3>
          <div class="actions data-tools">
            <button type="button" id="export-csv-btn">Exportar datos (CSV)</button>
            <button type="button" id="export-informe-btn">Exportar informe (Excel)</button>
            <button type="button" id="import-csv-btn">Importar datos (CSV)</button>
            <input type="file" id="csv-file-input" accept=".csv,text/csv" class="hidden" />
          </div>
          <p id="csv-message" class="muted">Puedes respaldar o restaurar registros en formato compatible con Excel.</p>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Cliente</th><th>Celular</th><th>Servicio</th><th>Ingreso</th><th>Término</th><th>Total</th><th>Saldo</th><th>Acción</th>
                </tr>
              </thead>
              <tbody id="register-table-body"></tbody>
            </table>
          </div>
        </section>
      </section>

      <section id="sales-section" class="app-section hidden">
        <section class="card form-card">
          <h2>Ventas de productos</h2>
          <form id="sales-form" novalidate>
            <div class="grid">
              <label>Nombre del producto<input type="text" id="productName" required /></label>
              <label>Unidades vendidas<input type="number" id="unitsSold" min="1" step="1" required /></label>
              <label>Precio unitario (S/)<input type="number" id="unitPrice" min="0" step="0.01" required /></label>
              <label>Precio final (S/)<input type="number" id="finalPrice" readonly /></label>
              <label>Medio de pago<select id="salesPayMethod"><option value="cash">Efectivo</option><option value="yape">Yape</option></select></label>
              <label>Fecha de venta<input type="date" id="saleDate" required /></label>
            </div>
            <p id="sales-error" class="error-message hidden" role="alert"></p>
            <div class="actions"><button type="submit">Registrar venta</button></div>
          </form>
        </section>

        <section class="card">
          <h3>Historial de ventas</h3>
          <div class="table-wrap">
            <table>
              <thead><tr><th>Producto</th><th>Unidades</th><th>Unitario</th><th>Total</th><th>Método</th><th>Fecha</th><th>Acción</th></tr></thead>
              <tbody id="sales-table-body"></tbody>
            </table>
          </div>
        </section>
      </section>

      <section id="pending-section" class="app-section hidden">
        <section class="card">
          <h2>Pagos pendientes</h2>
          <p class="muted">Aquí aparecen personas con adelanto parcial. Si completan el pago pasan automáticamente a Registro de gym.</p>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Cliente</th><th>Celular</th><th>Servicio</th><th>Total</th><th>Pagado</th><th>Saldo</th><th>Agregar pago</th><th>Acción</th>
                </tr>
              </thead>
              <tbody id="pending-table-body"></tbody>
            </table>
          </div>
        </section>
      </section>

      <section id="search-section" class="app-section hidden">
        <section class="card form-card">
          <h2>Búsqueda de usuario</h2>
          <div class="grid">
            <label>Buscar por nombre o celular<input type="text" id="searchInput" placeholder="Ej: María o 987654321" /></label>
          </div>
          <div id="search-results" class="list-stack muted" style="margin-top: 1rem;">Escribe un criterio para buscar.</div>
        </section>
      </section>

      <section id="staff-section" class="app-section hidden">
        <section class="card form-card">
          <h2>Control de personal del gym</h2>
          <form id="staff-form" novalidate>
            <div class="grid">
              <label>Nombre del personal<input type="text" id="staffName" required /></label>
              <label>Producto que consumió<input type="text" id="staffProduct" required /></label>
              <label>Efectivo que agarró o adelanto (S/)<input type="number" id="staffCash" min="0" step="0.01" required /></label>
              <label>Fecha<input type="date" id="staffDate" required /></label>
            </div>
            <p id="staff-error" class="error-message hidden" role="alert"></p>
            <div class="actions"><button type="submit">Guardar movimiento</button></div>
          </form>
        </section>

        <section class="card">
          <h3>Registro general del personal</h3>
          <div class="table-wrap">
            <table>
              <thead><tr><th>Personal</th><th>Producto</th><th>Efectivo</th><th>Fecha</th><th>Acción</th></tr></thead>
              <tbody id="staff-table-body"></tbody>
            </table>
          </div>
        </section>

        <section class="card">
          <h3>Control separado por trabajador</h3>
          <div id="staff-by-worker" class="list-stack muted">Sin movimientos registrados.</div>
        </section>
      </section>


      <section id="reports-section" class="app-section hidden">
        <section class="card">
          <h2>Reportes</h2>
          <p id="report-caption" class="muted"></p>
          <p class="muted">Resumen mensual por servicios, pendientes, ventas, personal y caja consolidada.</p>
          <div class="actions"><button type="button" id="export-reports-btn">Exportar reporte (CSV)</button></div>
        </section>

        <section class="card">
          <h3>Reporte mensual por servicio (inscripciones)</h3>
          <div class="table-wrap">
            <table>
              <thead><tr><th>Servicio</th><th>Registros</th><th>Total cobrado</th></tr></thead>
              <tbody id="report-service-body"></tbody>
            </table>
          </div>
        </section>

        <section class="card">
          <h3>Pagos pendientes</h3>
          <p id="report-pending-total" class="muted"></p>
          <div id="report-pending-list" class="list-stack muted">Sin deudas pendientes.</div>
        </section>

        <section class="card">
          <h3>Top productos vendidos</h3>
          <div id="report-top-products" class="list-stack muted">Sin ventas registradas.</div>
        </section>

        <section class="card">
          <h3>Reporte de personal</h3>
          <div id="report-staff-summary" class="list-stack muted">Sin movimientos del personal.</div>
        </section>

        <section class="card">
          <h3>Caja consolidada (mes actual)</h3>
          <div id="report-cash-summary" class="list-stack muted"></div>
        </section>
      </section>

      <section id="closure-section" class="app-section hidden">
        <section class="card">
          <h2>Cierre de caja</h2>
          <p class="muted">Resumen diario y mensual por servicio y ventas, separado por efectivo y yape.</p>
          <p id="closure-caption" class="muted"></p>
          <div class="actions">
            <button type="button" id="refresh-closure-btn">Actualizar cierre</button>
          </div>
        </section>

        <section class="card">
          <h3>Total de rutina</h3>
          <div id="closure-rutina" class="closure-grid"></div>
        </section>

        <section class="card">
          <h3>Total de máquinas</h3>
          <div id="closure-maquinas" class="closure-grid"></div>
        </section>

        <section class="card">
          <h3>Baile y jumping</h3>
          <div id="closure-baile-jumping" class="closure-grid"></div>
        </section>

        <section class="card">
          <h3>Ventas</h3>
          <div id="closure-ventas" class="closure-grid"></div>
        </section>
      </section>

    </main>

    <script src="script.js"></script>
  </body>
</html>
