<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zona Gym Pro - Sistema completo</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="container">
      <section class="hero">
        <p class="badge">PLANIFICADOR FITNESS</p>
        <h1>Zona Gym Pro</h1>
        <p>Sistema con 5 secciones: plan nutricional, registro, ventas, pagos pendientes y búsqueda de usuarios.</p>
      </section>

      <nav class="section-tabs" aria-label="Secciones principales">
        <button class="tab-btn active" type="button" data-target="nutrition-section">Plan nutricional</button>
        <button class="tab-btn" type="button" data-target="register-section">Registro de gym</button>
        <button class="tab-btn" type="button" data-target="sales-section">Ventas</button>
        <button class="tab-btn" type="button" data-target="pending-section">Pagos pendientes</button>
        <button class="tab-btn" type="button" data-target="search-section">Buscar usuario</button>
      </nav>

      <section id="nutrition-section" class="app-section">
        <section class="card form-card">
          <h2>Datos del alumno</h2>
          <form id="gym-form">
            <div class="grid">
              <label>Nombre<input type="text" id="name" placeholder="Ej: Juan Pérez" required /></label>
              <label>Edad<input type="number" id="age" min="14" max="90" required /></label>
              <label>
                Sexo
                <select id="sex" required>
                  <option value="">Seleccionar</option>
                  <option value="male">Masculino</option>
                  <option value="female">Femenino</option>
                </select>
              </label>
              <label>Peso actual (kg)<input type="number" id="weight" min="35" max="250" step="0.1" required /></label>
              <label>Estatura (cm)<input type="number" id="height" min="130" max="230" required /></label>
              <label>
                Actividad física
                <select id="activity" required>
                  <option value="1.2">Sedentario</option>
                  <option value="1.375">Ligera (1-3 días)</option>
                  <option value="1.55" selected>Moderada (3-5 días)</option>
                  <option value="1.725">Alta (6-7 días)</option>
                  <option value="1.9">Muy alta</option>
                </select>
              </label>
              <label>
                Objetivo
                <select id="goal" required>
                  <option value="lose">Bajar de peso</option>
                  <option value="maintain">Mantener peso</option>
                  <option value="gain">Subir de peso</option>
                </select>
              </label>
            </div>
            <button type="submit">Generar plan completo</button>
          </form>
        </section>

        <section id="results" class="hidden" aria-live="polite">
          <div class="card result-header" id="summary"></div>
          <div class="result-grid">
            <article class="card"><h3>Macros</h3><div id="macro-bars" class="stack"></div></article>
            <article class="card"><h3>Proyección</h3><div id="projection" class="projection"></div></article>
          </div>
          <article class="card"><h3>Comidas</h3><div id="foods" class="food-grid"></div></article>
          <article class="card"><h3>Rutina sugerida</h3><div id="routine" class="routine-grid"></div></article>
        </section>
      </section>

      <section id="register-section" class="app-section hidden">
        <section class="card form-card">
          <h2>Registro de inscripciones</h2>
          <form id="register-form" novalidate>
            <div class="grid">
              <label>Nombre y apellido<input type="text" id="fullName" required /></label>
              <label>DNI o identificación<input type="text" id="dni" required /></label>
              <label>Fecha de inscripción<input type="date" id="startDate" required /></label>
              <label>
                Tipo de servicio
                <select id="serviceType" required>
                  <option value="">Seleccionar servicio</option>
                  <option value="maquinas">Solo máquinas</option>
                  <option value="bailes">Solo bailes</option>
                  <option value="maquina_baile">Máquina + baile</option>
                  <option value="baile_jumping">Baile + jumping</option>
                  <option value="3servicios">Los 3 servicios</option>
                </select>
              </label>
              <label>
                Cantidad de personas
                <select id="peopleCount" required>
                  <option value="1">1 persona</option>
                  <option value="2plus">2 a más personas (promoción)</option>
                </select>
              </label>
              <label>Precio base (S/)<input type="number" id="basePrice" readonly /></label>
              <label>Fecha de término<input type="date" id="endDate" readonly /></label>
              <label>Adelanto pagado (S/)<input type="number" id="advancePaid" min="0" step="0.01" value="0" required /></label>
              <label>Total a pagar (S/)<input type="number" id="totalPay" readonly /></label>
              <label>Saldo (S/)<input type="number" id="balance" readonly /></label>
            </div>
            <p id="register-error" class="error-message hidden" role="alert"></p>
            <div class="actions">
              <button type="button" id="preview-btn">Ver resumen</button>
              <button type="submit">Guardar inscripción</button>
            </div>
          </form>
        </section>

        <section class="card">
          <h3>Alertas de vencimiento (3 días antes)</h3>
          <div id="expiry-alerts" class="list-stack muted">Sin alertas por ahora.</div>
        </section>

        <section class="card">
          <h3>Personas registradas (pagado completo)</h3>
          <div class="actions data-tools">
            <button type="button" id="export-csv-btn">Exportar datos (CSV)</button>
            <button type="button" id="import-csv-btn">Importar datos (CSV)</button>
            <input type="file" id="csv-file-input" accept=".csv,text/csv" class="hidden" />
          </div>
          <p id="csv-message" class="muted">Puedes respaldar o restaurar registros en formato compatible con Excel.</p>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Cliente</th><th>DNI</th><th>Servicio</th><th>Ingreso</th><th>Término</th><th>Total</th><th>Saldo</th><th>Acción</th>
                </tr>
              </thead>
              <tbody id="register-table-body"></tbody>
            </table>
          </div>
        </section>
      </section>

      <section id="sales-section" class="app-section hidden">
        <section class="card form-card">
          <h2>Ventas de productos</h2>
          <form id="sales-form" novalidate>
            <div class="grid">
              <label>Nombre del producto<input type="text" id="productName" required /></label>
              <label>Unidades vendidas<input type="number" id="unitsSold" min="1" step="1" required /></label>
              <label>Precio unitario (S/)<input type="number" id="unitPrice" min="0" step="0.01" required /></label>
              <label>Precio final (S/)<input type="number" id="finalPrice" readonly /></label>
            </div>
            <p id="sales-error" class="error-message hidden" role="alert"></p>
            <div class="actions"><button type="submit">Registrar venta</button></div>
          </form>
        </section>

        <section class="card">
          <h3>Historial de ventas</h3>
          <div class="table-wrap">
            <table>
              <thead><tr><th>Producto</th><th>Unidades</th><th>Unitario</th><th>Total</th></tr></thead>
              <tbody id="sales-table-body"></tbody>
            </table>
          </div>
        </section>
      </section>

      <section id="pending-section" class="app-section hidden">
        <section class="card">
          <h2>Pagos pendientes</h2>
          <p class="muted">Aquí aparecen personas con adelanto parcial. Si completan el pago pasan automáticamente a Registro de gym.</p>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Cliente</th><th>DNI</th><th>Servicio</th><th>Total</th><th>Pagado</th><th>Saldo</th><th>Agregar pago</th><th>Acción</th>
                </tr>
              </thead>
              <tbody id="pending-table-body"></tbody>
            </table>
          </div>
        </section>
      </section>

      <section id="search-section" class="app-section hidden">
        <section class="card form-card">
          <h2>Búsqueda de usuario</h2>
          <div class="grid">
            <label>Buscar por nombre o DNI<input type="text" id="searchInput" placeholder="Ej: María o 12345678" /></label>
          </div>
          <div id="search-results" class="list-stack muted" style="margin-top: 1rem;">Escribe un criterio para buscar.</div>
        </section>
      </section>
    </main>

    <div id="summary-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="summary-title">
      <div class="modal-content card">
        <h3 id="summary-title">Resumen de inscripción</h3>
        <div id="summary-content" class="modal-grid"></div>
        <div class="actions"><button type="button" id="close-modal-btn">Cerrar</button></div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
